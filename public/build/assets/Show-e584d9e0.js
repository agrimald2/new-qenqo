import{_ as h}from"./IconRounded-95d1b6e6.js";import{_ as g}from"./StudentsLayout-f5b3e5c9.js";import{_ as b}from"./SectionTitleLineWithButton-b157ada1.js";import{o as a,c as s,w as o,a as m,b as n,u as r,d as i,t as l,e as c,Z as A}from"./app-e626a5d5.js";import{_ as d}from"./BaseButton-d0b00a94.js";import{m as p}from"./mdi-f62b0ca1.js";import{_ as f}from"./CardBoxWidget-ff6f9da0.js";import{_}from"./CardBox-7edbfdbc.js";import"./main-39341a9e.js";import k from"./Qr-4fa2aacf.js";import C from"./StudentsTable-d8f45a2c.js";import"./UserAvatar-67e0014e.js";import"./BaseDivider-ba700f10.js";import"./OverlayLayer-c428521d.js";import"./BaseLevel-12afe250.js";import"./FormControl-01eb4caf.js";import"./numeral-5ddd0554.js";import"./PillTag-2e82f72d.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./qrcode.vue.esm-c8dd543b.js";import"./CardBoxModal-11397976.js";import"./BaseButtons-af64cb60.js";const w={class:"grid grid-cols-1 gap-6 lg:grid-cols-2 mb-6"},v={class:"font-bold text-xl"},D={class:"font-bold text-xl"},$={class:"grid grid-cols-1 gap-6 lg:grid-cols-2 mb-6"},y={props:["appointment","student","assistance"],data(){return{}},computed:{isWithinOneHourRange(){let t=new Date,e=new Date(this.appointment.date+" "+this.appointment.start_time),u=new Date(this.appointment.date+" "+this.appointment.end_time);return t>=e&&t<=u},isBeforeAppointmentDate(){let t=new Date,e=new Date(this.appointment.date);return t<=e}},components:[C,k],methods:{confirmAssistance(){m.post("/api/activePlanAppointment/confirmStudentAssistance",{active_plan_appointment_id:this.appointment.id,student_id:this.student.id}).then(t=>{window.location.reload()}).catch(t=>{this.$toast.error("Error al marcar la asistencia")})},markAssistance(){m.post("/api/activePlanAppointment/markStudentAssistance",{active_plan_appointment_id:this.appointment.id,student_id:this.student.id}).then(t=>{window.location.reload()}).catch(t=>{this.$toast.error("Error al marcar la asistencia")})},unConfirmAssistance(){m.post("/api/activePlanAppointment/unConfirmAssistance",{active_plan_appointment_id:this.appointment.id,student_id:this.student.id}).then(t=>{window.location.reload()}).catch(t=>{this.$toast.error("Error al marcar la asistencia")})}},mounted(){}},K=Object.assign(y,{__name:"Show",setup(t){return(e,u)=>(a(),s(g,null,{default:o(()=>[n(r(A),{title:"Clase"}),n(h,null,{default:o(()=>[n(b,{title:t.appointment.status+" - "+t.appointment.active_plan.name},null,8,["title"]),i("div",w,[n(_,{class:"mb-2"},{default:o(()=>[i("h3",v,l(t.appointment.date)+" de "+l(t.appointment.start_time.slice(0,5))+" al "+l(t.appointment.end_time.slice(0,5)),1)]),_:1}),n(_,{class:"center"},{default:o(()=>[i("div",null,[i("h1",D,l(t.assistance.status),1)]),i("div",null,[t.assistance.status!="Asistió"&&e.isWithinOneHourRange?(a(),s(d,{key:0,onClick:e.markAssistance,icon:r(p),label:"Marcar Asistencia",class:"bg-green-300 mr-4",color:"green",target:"_blank","rounded-full":""},null,8,["onClick","icon"])):c("",!0),t.assistance.status!="Confirmado"&&e.isBeforeAppointmentDate?(a(),s(d,{key:1,onClick:e.confirmAssistance,icon:r(p),label:"Asistiré",class:"bg-green-300 mr-4",color:"green",target:"_blank","rounded-full":""},null,8,["onClick","icon"])):c("",!0),e.isBeforeAppointmentDate?(a(),s(d,{key:2,onClick:e.unConfirmAssistance,icon:r(p),label:"No Asistiré",class:"bg-red-300",color:"green",target:"_blank","rounded-full":""},null,8,["onClick","icon"])):c("",!0)])]),_:1})]),i("div",$,[n(f,{trend:"de "+t.appointment.assistances.length,"trend-type":"up",color:"text-blue-500",icon:e.mdiCartOutline,number:0,prefix:"",label:"Confirmados"},null,8,["trend","icon"]),n(f,{trend:"de"+t.appointment.assistances.length,"trend-type":"down",color:"text-red-500",icon:e.mdiCartOutline,number:0,prefix:"",label:"No Irán"},null,8,["trend","icon"])])]),_:1})]),_:1}))}});export{K as default};
