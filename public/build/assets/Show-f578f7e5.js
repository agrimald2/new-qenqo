import{_ as o,a as m}from"./SectionTitleLineWithButton-7a4d7e88.js";import{_ as d}from"./StudentsLayout-8d511d36.js";import{o as p,c as u,w as s,a as n,b as e,u as f,d as i,t as l,Z as h}from"./app-127ad8d0.js";import"./BaseButton-e8161602.js";import{_ as c}from"./CardBoxWidget-505863a3.js";import{_ as r}from"./CardBox-ec8fd3b2.js";import"./main-974464e4.js";import _ from"./Create-e50ffaa2.js";import v from"./Create-41bfe915.js";import P from"./List-d2bfd75b.js";import g from"./List-3e846618.js";import y from"./Table-a34a3a9f.js";import b from"./Create-f4a74a1f.js";import"./mdi-6108fd70.js";import"./UserAvatar-8a32cd0d.js";import"./BaseDivider-ad61b49e.js";import"./OverlayLayer-2858f6d1.js";import"./BaseLevel-264dcdda.js";import"./FormControl-e30ddae7.js";import"./numeral-fb3f3e0b.js";import"./PillTag-89f52d05.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./FormField-6ab93971.js";import"./BaseButtons-f1706410.js";import"./CardBoxModal-f606295c.js";const w={class:"font-bold text-xl"},$=["max","value"],S={class:"grid gap-6 lg:grid-cols-2 mb-6"},A={class:"mb-6"},C={props:["activePlan"],data(){return{showCreateStudents:!1,showCreatePayment:!1,showCreateAppointment:!1,active_students:[],students:[],selectedStudent:null,payments:[],total_payed:0,appointment_statuses:[{id:1,value:"Confirmado"},{id:2,value:"Finalizado"},{id:3,value:"Cancelado"}],appointments:[]}},components:[_,P,v,g,b],methods:{fetchActivePlanStudents(){n.get("/api/activePlans/"+this.activePlan.id+"/students").then(t=>{this.active_students=t.data}).catch(t=>{console.error(t)})},fetchStudents(){n.get("/api/students").then(t=>{this.students=t.data}).catch(t=>{console.error(t)})},fetchPayments(){n.get("/students/getActivePlanPayments/"+this.activePlan.id).then(t=>{this.payments=t.data,this.calculateTotalPayed(),this.fetchActivePlan()}).catch(t=>{console.log("Emit:"),console.error(t)})},calculateTotalPayed(){this.total_payed=this.payments.reduce((t,a)=>t+parseFloat(a.total_payed),0)},async fetchActivePlan(){n.get("/api/activePlans/getById/"+this.activePlan.id).then(t=>{this.activePlan=t.data}).catch(t=>{console.error(t)})},async fetchAppointment(){n.get("/students/getAppointments/").then(t=>{console.log(t.data),this.appointments=t.data}).catch(t=>{console.log("Emit:"),console.error(t)})}},mounted(){this.fetchActivePlanStudents(),this.fetchStudents(),this.fetchPayments(),this.fetchAppointment()}},Y=Object.assign(C,{__name:"Show",setup(t){return(a,x)=>(p(),u(d,null,{default:s(()=>[e(f(h),{title:"Tarifas"}),e(m,null,{default:s(()=>[e(o,{title:"Grupo: "+t.activePlan.name},null,8,["title"]),e(r,{class:"mb-2"},{default:s(()=>[i("h3",w,l(t.activePlan.start_date)+" al "+l(t.activePlan.end_date),1),i("progress",{class:"flex w-2/5 self-center lg:w-full",max:Math.floor((new Date(t.activePlan.end_date)-new Date(t.activePlan.start_date))/(1e3*60*60*24)),value:Math.floor((new Date-new Date(t.activePlan.start_date))/(1e3*60*60*24))},null,8,$)]),_:1}),i("div",S,[e(c,{trend:""+a.total_payed,"trend-type":"up",color:"text-blue-500",icon:a.mdiCartOutline,number:a.total_payed,prefix:"S/ ",label:"Pagado"},null,8,["trend","icon","number"]),e(c,{trend:"de"+t.activePlan.rate_sessions_number,"trend-type":"alert",color:"text-red-500",icon:a.mdiCartOutline,number:t.activePlan.rate_sessions_assisted,prefix:"",label:"Sesiones"},null,8,["trend","icon","number"])]),i("div",A,[e(o,{title:"Clases"}),e(r,{class:"mb-2"},{default:s(()=>[e(y,{appointments:a.appointments},null,8,["appointments"])]),_:1})])]),_:1})]),_:1}))}});export{Y as default};
