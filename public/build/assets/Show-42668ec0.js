import{_ as h}from"./AsideMenu-8b4b5ee4.js";import{_ as g}from"./StudentsLayout-15abe2db.js";import{_ as b}from"./SectionTitleLineWithButton-cf1e246b.js";import{o as a,c as s,w as o,a as m,b as n,u as r,Z as A,d as i,t as l,e as c}from"./app-9f2eb8dd.js";import{_ as d}from"./BaseButton-9a3f1db7.js";import{m as p}from"./mdi-66a87996.js";import{_ as f}from"./CardBoxWidget-7e15718c.js";import{_}from"./CardBox-e1e2cea0.js";import"./main-4957fc0e.js";import"./colors-ea023820.js";import k from"./Qr-3bd2d0c4.js";import C from"./StudentsTable-d139fb22.js";import"./BaseIcon-9a2ca4ad.js";import"./UserAvatar-4cfac3ec.js";import"./BaseDivider-b91b2461.js";import"./OverlayLayer-1e6f50da.js";import"./IconRounded-cea43341.js";import"./numeral-574c020d.js";import"./BaseLevel-c3fa91a4.js";import"./PillTag-f1f08ee3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./qrcode.vue.esm-f5642c55.js";import"./CardBoxModal-13b1714e.js";import"./BaseButtons-91e2cdd3.js";const w={class:"grid grid-cols-1 gap-6 lg:grid-cols-2 mb-6"},v={class:"font-bold text-xl"},D={class:"font-bold text-xl"},$={class:"grid grid-cols-1 gap-6 lg:grid-cols-2 mb-6"},y={props:["appointment","student","assistance"],data(){return{}},computed:{isWithinOneHourRange(){let t=new Date,e=new Date(this.appointment.date+" "+this.appointment.start_time),u=new Date(this.appointment.date+" "+this.appointment.end_time);return t>=e&&t<=u},isBeforeAppointmentDate(){let t=new Date,e=new Date(this.appointment.date);return t<=e}},components:[C,k],methods:{confirmAssistance(){m.post("/api/activePlanAppointment/confirmStudentAssistance",{active_plan_appointment_id:this.appointment.id,student_id:this.student.id}).then(t=>{window.location.reload()}).catch(t=>{this.$toast.error("Error al marcar la asistencia")})},markAssistance(){m.post("/api/activePlanAppointment/markStudentAssistance",{active_plan_appointment_id:this.appointment.id,student_id:this.student.id}).then(t=>{window.location.reload()}).catch(t=>{this.$toast.error("Error al marcar la asistencia")})},unConfirmAssistance(){m.post("/api/activePlanAppointment/unConfirmAssistance",{active_plan_appointment_id:this.appointment.id,student_id:this.student.id}).then(t=>{window.location.reload()}).catch(t=>{this.$toast.error("Error al marcar la asistencia")})}},mounted(){}},U=Object.assign(y,{__name:"Show",setup(t){return(e,u)=>(a(),s(g,null,{default:o(()=>[n(r(A),{title:"Clase"}),n(h,null,{default:o(()=>[n(b,{title:t.appointment.status+" - "+t.appointment.active_plan.name},null,8,["title"]),i("div",w,[n(_,{class:"mb-2"},{default:o(()=>[i("h3",v,l(t.appointment.date)+" de "+l(t.appointment.start_time.slice(0,5))+" al "+l(t.appointment.end_time.slice(0,5)),1)]),_:1}),n(_,{class:"center"},{default:o(()=>[i("div",null,[i("h1",D,l(t.assistance.status),1)]),i("div",null,[t.assistance.status!="Asistió"&&e.isWithinOneHourRange?(a(),s(d,{key:0,onClick:e.markAssistance,icon:r(p),label:"Marcar Asistencia",class:"bg-green-300 mr-4",color:"green",target:"_blank","rounded-full":""},null,8,["onClick","icon"])):c("",!0),t.assistance.status!="Confirmado"&&e.isBeforeAppointmentDate?(a(),s(d,{key:1,onClick:e.confirmAssistance,icon:r(p),label:"Asistiré",class:"bg-green-300 mr-4",color:"green",target:"_blank","rounded-full":""},null,8,["onClick","icon"])):c("",!0),e.isBeforeAppointmentDate?(a(),s(d,{key:2,onClick:e.unConfirmAssistance,icon:r(p),label:"No Asistiré",class:"bg-red-300",color:"green",target:"_blank","rounded-full":""},null,8,["onClick","icon"])):c("",!0)])]),_:1})]),i("div",$,[n(f,{trend:"de "+t.appointment.assistances.length,"trend-type":"up",color:"text-blue-500",icon:e.mdiCartOutline,number:0,prefix:"",label:"Confirmados"},null,8,["trend","icon"]),n(f,{trend:"de"+t.appointment.assistances.length,"trend-type":"down",color:"text-red-500",icon:e.mdiCartOutline,number:0,prefix:"",label:"No Irán"},null,8,["trend","icon"])])]),_:1})]),_:1}))}});export{U as default};
