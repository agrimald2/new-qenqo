import{r as k,h as R,M as F,o as p,f as q,d,b as e,n as B,t as N,e as U,c as b,w as l,j as C,u as f,W as g,a as y,l as $}from"./app-9f2eb8dd.js";import{u as j}from"./main-4957fc0e.js";import{Y as A,Z as T,e as I,_ as x,i as P}from"./mdi-66a87996.js";import{d as M,_ as z}from"./AsideMenu-8b4b5ee4.js";import{_ as w}from"./CardBox-e1e2cea0.js";import{_ as m}from"./FormField-f1ea0fce.js";import{_ as c}from"./FormControl-587b9277.js";import{_ as V}from"./BaseButton-9a3f1db7.js";import{_ as S}from"./BaseButtons-91e2cdd3.js";import{_ as D}from"./BaseLevel-c3fa91a4.js";import{_ as E}from"./FormCheckRadio-e761de74.js";import{_ as O}from"./PillTag-f1f08ee3.js";import{_ as W}from"./LayoutAuthenticated-bde042ce.js";import{_ as Y}from"./SectionTitleLineWithButton-cf1e246b.js";import"./BaseIcon-9a2ca4ad.js";import"./UserAvatar-4cfac3ec.js";import"./BaseDivider-b91b2461.js";import"./colors-ea023820.js";import"./OverlayLayer-1e6f50da.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./IconRounded-cea43341.js";const Z={class:"flex items-stretch justify-start relative"},G={class:"inline-flex"},H=["accept"],J={key:0,class:"px-4 py-2 bg-gray-100 dark:bg-slate-800 border-gray-200 dark:border-slate-700 border rounded-r"},K={class:"text-ellipsis line-clamp-1"},L={__name:"FormFilePicker",props:{modelValue:{type:[Object,File,Array],default:null},label:{type:String,default:null},icon:{type:String,default:A},accept:{type:String,default:null},color:{type:String,default:"info"},isRoundIcon:Boolean},emits:["update:modelValue"],setup(o,{emit:i}){const s=o,u=k(null),n=k(s.modelValue),_=R(()=>!s.isRoundIcon&&n.value),h=R(()=>s.modelValue);F(h,t=>{n.value=t,t||(u.value.input.value=null)});const v=t=>{const r=t.target.files||t.dataTransfer.files;n.value=r[0],i("update:modelValue",n.value)};return(t,r)=>(p(),q("div",Z,[d("label",G,[e(V,{as:"a",class:B({"w-12 h-12":o.isRoundIcon,"rounded-r-none":_.value}),"icon-size":o.isRoundIcon?24:void 0,label:o.isRoundIcon?null:o.label,icon:o.icon,color:o.color,"rounded-full":o.isRoundIcon},null,8,["class","icon-size","label","icon","color","rounded-full"]),d("input",{ref_key:"root",ref:u,type:"file",class:"absolute top-0 left-0 w-full h-full opacity-0 outline-none cursor-pointer -z-1",accept:o.accept,onInput:v},null,40,H)]),_.value?(p(),q("div",J,[d("span",K,N(n.value.name),1)])):U("",!0)]))}},Q={class:"space-y-3 text-center md:text-left lg:mx-12"},X={class:"flex justify-center md:block"},ee={class:"text-2xl"},oe={class:"flex justify-center md:block"},le={__name:"UserCard",props:{user:Array},setup(o){const i=j();R(()=>i.userName);const s=k(!1);return(u,n)=>(p(),b(w,null,{default:l(()=>[e(D,{type:"justify-around lg:justify-center"},{default:l(()=>[e(M,{class:"lg:mx-12"}),d("div",Q,[d("div",X,[e(E,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=_=>s.value=_),name:"notifications-switch",type:"switch",label:"Notifications","input-value":!0},null,8,["modelValue"])]),d("h1",ee,[C(" Bienvenido, "),d("b",null,N(o.user.name),1),C("! ")]),d("p",null,[d("b",null,N(o.user.role.name),1)]),d("div",oe,[e(O,{label:"Verified",color:"info",icon:f(T)},null,8,["icon"])])])]),_:1})]),_:1}))}},ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},te={data(){return{trainers:[]}},methods:{fetchTrainers(){y.get("/api/getTrainers").then(o=>{this.trainers=o.data}).catch(o=>{console.error(o)})}},mounted(){this.fetchTrainers()}},ke=Object.assign(te,{__name:"Profile",props:{user:Array},setup(o){const i=o;j(),console.dir(i.user);const s=g({user_id:i.user.id,name:i.user.name,username:i.user.username,dni:i.user.dni,phone:i.user.phone}),u=g({user_id:i.user.id,password:""}),n=g({user_id:i.user.id,reffered_by:i.user.role_id===3?i.user.student.reffered_by:null}),_=()=>{y.put(`/api/user/${s.user_id}/information`,s).then(t=>{window.location.reload()}).catch(t=>{console.log(t)})},h=()=>{y.put(`/api/user/${u.user_id}/password`,u).then(t=>{window.location.reload()}).catch(t=>{console.log(t)})},v=()=>{n.reffered_by=n.reffered_by.value,y.put(`/api/student/${u.user_id}/updateRefferedBy`,n).then(t=>{window.location.reload()}).catch(t=>{console.log(t)})};return(t,r)=>(p(),b(W,null,{default:l(()=>[e(z,null,{default:l(()=>[e(Y,{icon:f(I),title:"Profile",main:""},null,8,["icon"]),e(le,{class:"mb-6",user:o.user},null,8,["user"]),d("div",ae,[e(w,{"is-form":"",onSubmit:$(_,["prevent"])},{footer:l(()=>[e(S,null,{default:l(()=>[e(V,{color:"info",type:"submit",label:"Submit"})]),_:1})]),default:l(()=>[i.user.role_id!=3?(p(),b(m,{key:0,label:"Avatar",help:"Max 500kb"},{default:l(()=>[e(L,{label:"Upload"})]),_:1})):U("",!0),e(m,{label:"Name",help:"Required. Nombre"},{default:l(()=>[e(c,{modelValue:s.name,"onUpdate:modelValue":r[0]||(r[0]=a=>s.name=a),icon:f(I),name:"name",required:"",autocomplete:"name"},null,8,["modelValue","icon"])]),_:1}),e(m,{label:"Username",help:"Required. Nombre de usuario"},{default:l(()=>[e(c,{modelValue:s.username,"onUpdate:modelValue":r[1]||(r[1]=a=>s.username=a),icon:f(x),type:"text",name:"username",required:"",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1}),e(m,{label:"DNI",help:"Required. DNI"},{default:l(()=>[e(c,{modelValue:s.dni,"onUpdate:modelValue":r[2]||(r[2]=a=>s.dni=a),icon:f(x),type:"text",name:"dni",required:"",autocomplete:"dni"},null,8,["modelValue","icon"])]),_:1}),e(m,{label:"Celular",help:"Required. Celular"},{default:l(()=>[e(c,{modelValue:s.phone,"onUpdate:modelValue":r[3]||(r[3]=a=>s.phone=a),icon:f(x),type:"text",name:"phone",required:"",autocomplete:"phone"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"]),e(w,{"is-form":"",onSubmit:$(h,["prevent"])},{footer:l(()=>[e(S,null,{default:l(()=>[e(V,{type:"submit",color:"info",label:"Submit"})]),_:1})]),default:l(()=>[e(m,{label:"New password",help:"Required. New password"},{default:l(()=>[e(c,{modelValue:u.password,"onUpdate:modelValue":r[4]||(r[4]=a=>u.password=a),icon:f(P),name:"password",type:"password",required:"",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),e(m,{label:"Confirm password",help:"Required. New password one more time"},{default:l(()=>[e(c,{modelValue:u.password_confirmation,"onUpdate:modelValue":r[5]||(r[5]=a=>u.password_confirmation=a),icon:f(P),name:"password_confirmation",type:"password",required:"",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"]),o.user.role_id===3&&o.user.student?(p(),b(w,{key:0,"is-form":"",onSubmit:$(v,["prevent"])},{footer:l(()=>[e(S,null,{default:l(()=>[e(V,{type:"submit",color:"info",label:"Submit"})]),_:1})]),default:l(()=>[o.user.student.referred_by?(p(),b(m,{key:0,label:"Referido por: "+o.user.student.referred_by.name,help:"Cambair Entrenador"},{default:l(()=>[e(c,{icon:t.mdiPlusCircle,type:"select",options:t.trainers.map(a=>({label:a.user.name,value:a.user.id})),modelValue:n.reffered_by,"onUpdate:modelValue":r[6]||(r[6]=a=>n.reffered_by=a)},null,8,["icon","options","modelValue"])]),_:1},8,["label"])):(p(),b(m,{key:1,help:"AÃ±adir Entrenador"},{default:l(()=>[e(c,{icon:t.mdiPlusCircle,type:"select",options:t.trainers.map(a=>({label:a.user.name,value:a.user.id})),modelValue:n.reffered_by,"onUpdate:modelValue":r[7]||(r[7]=a=>n.reffered_by=a)},null,8,["icon","options","modelValue"])]),_:1}))]),_:1},8,["onSubmit"])):U("",!0)])]),_:1})]),_:1}))}});export{ke as default};
