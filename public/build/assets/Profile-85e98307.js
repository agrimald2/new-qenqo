import{r as R,h as k,M as F,o as p,f as U,d,b as e,n as B,t as N,e as P,c as b,w as l,j as q,u as f,S as g,a as y,l as $}from"./app-e626a5d5.js";import{u as j}from"./main-39341a9e.js";import{Q as A,R as T,e as C,S as x,i as I}from"./mdi-f62b0ca1.js";import{f as M,_ as z}from"./IconRounded-95d1b6e6.js";import{_ as w}from"./CardBox-7edbfdbc.js";import{_ as m}from"./FormField-2166c5f3.js";import{_ as c}from"./FormControl-01eb4caf.js";import{_ as V}from"./BaseButton-d0b00a94.js";import{_ as S}from"./BaseButtons-af64cb60.js";import{_ as D}from"./BaseLevel-12afe250.js";import{_ as E}from"./FormCheckRadio-1127a291.js";import{_ as O}from"./PillTag-2e82f72d.js";import{_ as Q}from"./LayoutAuthenticated-ca1cfdfa.js";import{_ as G}from"./SectionTitleLineWithButton-b157ada1.js";import"./UserAvatar-67e0014e.js";import"./BaseDivider-ba700f10.js";import"./OverlayLayer-c428521d.js";import"./_plugin-vue_export-helper-c27b6911.js";const H={class:"flex items-stretch justify-start relative"},J={class:"inline-flex"},K=["accept"],L={key:0,class:"px-4 py-2 bg-gray-100 dark:bg-slate-800 border-gray-200 dark:border-slate-700 border rounded-r"},W={class:"text-ellipsis line-clamp-1"},X={__name:"FormFilePicker",props:{modelValue:{type:[Object,File,Array],default:null},label:{type:String,default:null},icon:{type:String,default:A},accept:{type:String,default:null},color:{type:String,default:"info"},isRoundIcon:Boolean},emits:["update:modelValue"],setup(o,{emit:i}){const s=o,u=R(null),n=R(s.modelValue),_=k(()=>!s.isRoundIcon&&n.value),h=k(()=>s.modelValue);F(h,t=>{n.value=t,t||(u.value.input.value=null)});const v=t=>{const r=t.target.files||t.dataTransfer.files;n.value=r[0],i("update:modelValue",n.value)};return(t,r)=>(p(),U("div",H,[d("label",J,[e(V,{as:"a",class:B({"w-12 h-12":o.isRoundIcon,"rounded-r-none":_.value}),"icon-size":o.isRoundIcon?24:void 0,label:o.isRoundIcon?null:o.label,icon:o.icon,color:o.color,"rounded-full":o.isRoundIcon},null,8,["class","icon-size","label","icon","color","rounded-full"]),d("input",{ref_key:"root",ref:u,type:"file",class:"absolute top-0 left-0 w-full h-full opacity-0 outline-none cursor-pointer -z-1",accept:o.accept,onInput:v},null,40,K)]),_.value?(p(),U("div",L,[d("span",W,N(n.value.name),1)])):P("",!0)]))}},Y={class:"space-y-3 text-center md:text-left lg:mx-12"},Z={class:"flex justify-center md:block"},ee={class:"text-2xl"},oe={class:"flex justify-center md:block"},le={__name:"UserCard",props:{user:Array},setup(o){const i=j();k(()=>i.userName);const s=R(!1);return(u,n)=>(p(),b(w,null,{default:l(()=>[e(D,{type:"justify-around lg:justify-center"},{default:l(()=>[e(M,{class:"lg:mx-12"}),d("div",Y,[d("div",Z,[e(E,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=_=>s.value=_),name:"notifications-switch",type:"switch",label:"Notifications","input-value":!0},null,8,["modelValue"])]),d("h1",ee,[q(" Bienvenido, "),d("b",null,N(o.user.name),1),q("! ")]),d("p",null,[d("b",null,N(o.user.role.name),1)]),d("div",oe,[e(O,{label:"Verified",color:"info",icon:f(T)},null,8,["icon"])])])]),_:1})]),_:1}))}},ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},te={data(){return{trainers:[]}},methods:{fetchTrainers(){y.get("/api/getTrainers").then(o=>{this.trainers=o.data}).catch(o=>{console.error(o)})}},mounted(){this.fetchTrainers()}},$e=Object.assign(te,{__name:"Profile",props:{user:Array},setup(o){const i=o;j();const s=g({user_id:i.user.id,name:i.user.name,username:i.user.username,dni:i.user.dni,phone:i.user.phone}),u=g({user_id:i.user.id,password:""}),n=g({user_id:i.user.id,reffered_by:i.user.role_id===3?i.user.student.reffered_by:null}),_=()=>{y.put(`/api/user/${s.user_id}/information`,s).then(t=>{window.location.reload()}).catch(t=>{console.log(t)})},h=()=>{y.put(`/api/user/${u.user_id}/password`,u).then(t=>{window.location.reload()}).catch(t=>{console.log(t)})},v=()=>{n.reffered_by=n.reffered_by.value,y.put(`/api/student/${u.user_id}/updateRefferedBy`,n).then(t=>{window.location.reload()}).catch(t=>{console.log(t)})};return(t,r)=>(p(),b(Q,null,{default:l(()=>[e(z,null,{default:l(()=>[e(G,{icon:f(C),title:"Profile",main:""},null,8,["icon"]),e(le,{class:"mb-6",user:o.user},null,8,["user"]),d("div",ae,[e(w,{"is-form":"",onSubmit:$(_,["prevent"])},{footer:l(()=>[e(S,null,{default:l(()=>[e(V,{color:"info",type:"submit",label:"Submit"})]),_:1})]),default:l(()=>[e(m,{label:"Avatar",help:"Max 500kb"},{default:l(()=>[e(X,{label:"Upload"})]),_:1}),e(m,{label:"Name",help:"Required. Nombre"},{default:l(()=>[e(c,{modelValue:s.name,"onUpdate:modelValue":r[0]||(r[0]=a=>s.name=a),icon:f(C),name:"name",required:"",autocomplete:"name"},null,8,["modelValue","icon"])]),_:1}),e(m,{label:"Username",help:"Required. Nombre de usuario"},{default:l(()=>[e(c,{modelValue:s.username,"onUpdate:modelValue":r[1]||(r[1]=a=>s.username=a),icon:f(x),type:"text",name:"username",required:"",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1}),e(m,{label:"DNI",help:"Required. DNI"},{default:l(()=>[e(c,{modelValue:s.dni,"onUpdate:modelValue":r[2]||(r[2]=a=>s.dni=a),icon:f(x),type:"text",name:"dni",required:"",autocomplete:"dni"},null,8,["modelValue","icon"])]),_:1}),e(m,{label:"Celular",help:"Required. Celular"},{default:l(()=>[e(c,{modelValue:s.phone,"onUpdate:modelValue":r[3]||(r[3]=a=>s.phone=a),icon:f(x),type:"text",name:"phone",required:"",autocomplete:"phone"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"]),e(w,{"is-form":"",onSubmit:$(h,["prevent"])},{footer:l(()=>[e(S,null,{default:l(()=>[e(V,{type:"submit",color:"info",label:"Submit"})]),_:1})]),default:l(()=>[e(m,{label:"New password",help:"Required. New password"},{default:l(()=>[e(c,{modelValue:u.password,"onUpdate:modelValue":r[4]||(r[4]=a=>u.password=a),icon:f(I),name:"password",type:"password",required:"",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),e(m,{label:"Confirm password",help:"Required. New password one more time"},{default:l(()=>[e(c,{modelValue:u.password_confirmation,"onUpdate:modelValue":r[5]||(r[5]=a=>u.password_confirmation=a),icon:f(I),name:"password_confirmation",type:"password",required:"",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"]),o.user.role_id===3&&o.user.student?(p(),b(w,{key:0,"is-form":"",onSubmit:$(v,["prevent"])},{footer:l(()=>[e(S,null,{default:l(()=>[e(V,{type:"submit",color:"info",label:"Submit"})]),_:1})]),default:l(()=>[o.user.student.referred_by?(p(),b(m,{key:0,label:"Referido por: "+o.user.student.referred_by.name,help:"Cambair Entrenador"},{default:l(()=>[e(c,{icon:t.mdiPlusCircle,type:"select",options:t.trainers.map(a=>({label:a.user.name,value:a.user.id})),modelValue:n.reffered_by,"onUpdate:modelValue":r[6]||(r[6]=a=>n.reffered_by=a)},null,8,["icon","options","modelValue"])]),_:1},8,["label"])):(p(),b(m,{key:1,help:"AÃ±adir Entrenador"},{default:l(()=>[e(c,{icon:t.mdiPlusCircle,type:"select",options:t.trainers.map(a=>({label:a.user.name,value:a.user.id})),modelValue:n.reffered_by,"onUpdate:modelValue":r[7]||(r[7]=a=>n.reffered_by=a)},null,8,["icon","options","modelValue"])]),_:1}))]),_:1},8,["onSubmit"])):P("",!0)])]),_:1})]),_:1}))}});export{$e as default};
