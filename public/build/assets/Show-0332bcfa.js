import{_ as m}from"./AsideMenu-8b4b5ee4.js";import{_ as d}from"./StudentsLayout-15abe2db.js";import{_ as o}from"./SectionTitleLineWithButton-cf1e246b.js";import{o as p,c as u,w as s,a as n,b as e,u as f,Z as h,d as i,t as l}from"./app-9f2eb8dd.js";import"./colors-ea023820.js";import{_ as r}from"./CardBoxWidget-7e15718c.js";import{_ as c}from"./CardBox-e1e2cea0.js";import"./main-4957fc0e.js";import _ from"./Create-f41f1da1.js";import v from"./Create-32218cb6.js";import P from"./List-5b4d49e6.js";import g from"./List-dfaa12eb.js";import y from"./Table-2b419a4c.js";import b from"./Create-8e66f89f.js";import"./mdi-66a87996.js";import"./BaseIcon-9a2ca4ad.js";import"./UserAvatar-4cfac3ec.js";import"./BaseDivider-b91b2461.js";import"./OverlayLayer-1e6f50da.js";import"./BaseButton-9a3f1db7.js";import"./IconRounded-cea43341.js";import"./numeral-574c020d.js";import"./BaseLevel-c3fa91a4.js";import"./PillTag-f1f08ee3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./FormControl-587b9277.js";import"./FormField-f1ea0fce.js";import"./BaseButtons-91e2cdd3.js";import"./CardBoxModal-13b1714e.js";const w={class:"font-bold text-xl"},$=["max","value"],S={class:"grid gap-6 lg:grid-cols-2 mb-6"},A={class:"mb-6"},C={props:["activePlan"],data(){return{showCreateStudents:!1,showCreatePayment:!1,showCreateAppointment:!1,active_students:[],students:[],selectedStudent:null,payments:[],total_payed:0,appointment_statuses:[{id:1,value:"Confirmado"},{id:2,value:"Finalizado"},{id:3,value:"Cancelado"}],appointments:[]}},components:[_,P,v,g,b],methods:{fetchActivePlanStudents(){n.get("/api/activePlans/"+this.activePlan.id+"/students").then(t=>{this.active_students=t.data}).catch(t=>{console.error(t)})},fetchStudents(){n.get("/api/students").then(t=>{this.students=t.data}).catch(t=>{console.error(t)})},fetchPayments(){n.get("/students/getActivePlanPayments/"+this.activePlan.id).then(t=>{this.payments=t.data,this.calculateTotalPayed(),this.fetchActivePlan()}).catch(t=>{console.log("Emit:"),console.error(t)})},calculateTotalPayed(){this.total_payed=this.payments.reduce((t,a)=>t+parseFloat(a.total_payed),0)},async fetchActivePlan(){n.get("/api/activePlans/getById/"+this.activePlan.id).then(t=>{this.activePlan=t.data}).catch(t=>{console.error(t)})},async fetchAppointment(){n.get("/students/getAppointments/").then(t=>{console.log(t.data),this.appointments=t.data}).catch(t=>{console.log("Emit:"),console.error(t)})}},mounted(){this.fetchActivePlanStudents(),this.fetchStudents(),this.fetchPayments(),this.fetchAppointment()}},nt=Object.assign(C,{__name:"Show",setup(t){return(a,x)=>(p(),u(d,null,{default:s(()=>[e(f(h),{title:"Tarifas"}),e(m,null,{default:s(()=>[e(o,{title:"Grupo: "+t.activePlan.name},null,8,["title"]),e(c,{class:"mb-2"},{default:s(()=>[i("h3",w,l(t.activePlan.start_date)+" al "+l(t.activePlan.end_date),1),i("progress",{class:"flex w-2/5 self-center lg:w-full",max:Math.floor((new Date(t.activePlan.end_date)-new Date(t.activePlan.start_date))/(1e3*60*60*24)),value:Math.floor((new Date-new Date(t.activePlan.start_date))/(1e3*60*60*24))},null,8,$)]),_:1}),i("div",S,[e(r,{trend:""+a.total_payed,"trend-type":"up",color:"text-blue-500",icon:a.mdiCartOutline,number:a.total_payed,prefix:"S/ ",label:"Pagado"},null,8,["trend","icon","number"]),e(r,{trend:"de"+t.activePlan.rate_sessions_number,"trend-type":"alert",color:"text-red-500",icon:a.mdiCartOutline,number:t.activePlan.rate_sessions_assisted,prefix:"",label:"Sesiones"},null,8,["trend","icon","number"])]),i("div",A,[e(o,{title:"Clases"}),e(c,{class:"mb-2"},{default:s(()=>[e(y,{appointments:a.appointments},null,8,["appointments"])]),_:1})])]),_:1})]),_:1}))}});export{nt as default};
