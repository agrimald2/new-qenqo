import{_ as c}from"./CardBox-639f5196.js";import{_ as u}from"./BaseButton-621d7276.js";import{m as o}from"./mdi-4cce4133.js";import{_ as r}from"./FormField-c50aa728.js";import{_ as d}from"./FormControl-21eaae75.js";import{r as p,o as y,c as h,w as i,a as m,j as _,t as f,b as l,u as s}from"./app-8407c33d.js";import"./main-f4bc4e72.js";const P={props:["activePlan"],data(){return{active_students:[],payment_methods:[],payment:{payment_method:"",total_payed:"",student_id:"",active_plan_id:this.activePlan.id},selectedPaymentMethod:[],selectedStudent:[]}},components:[],methods:{fetchActivePlanStudents(){m.get("/api/activePlans/"+this.activePlan.id+"/students").then(e=>{this.active_students=e.data,console.dir(this.active_students)}).catch(e=>{console.error(e)})},fetchPaymentMethods(){m.get("/api/getPaymentMethods").then(e=>{this.payment_methods=e.data}).catch(e=>{console.error(e)})},async addPayment(){this.payment.payment_method=this.selectedPaymentMethod.value,this.payment.student_id=this.selectedStudent.value;try{await m.post("/api/activePlanPayments/",this.payment),this.$emit("payment-added")}catch(e){console.error(e)}}},mounted(){this.fetchActivePlanStudents(),this.fetchPaymentMethods()}},$=Object.assign(P,{__name:"Create",emits:["family-created"],setup(e,{emit:v}){return p(""),(a,n)=>(y(),h(c,{title:"Pagar",hasCancel:!0,class:"bg-gray-500 slide-in-top my-2"},{default:i(()=>[_(" Faltan S/"+f(e.activePlan.total-e.activePlan.total_payed)+" ",1),l(r,{label:"Alumno"},{default:i(()=>[l(d,{icon:s(o),type:"select",options:a.active_students.map(t=>({label:t.name,value:t.id})),modelValue:a.selectedStudent,"onUpdate:modelValue":n[0]||(n[0]=t=>a.selectedStudent=t)},null,8,["icon","options","modelValue"])]),_:1}),l(r,{label:"Pago"},{default:i(()=>[l(d,{icon:s(o),type:"select",options:a.payment_methods.map(t=>({label:t.name,value:t.name})),modelValue:a.selectedPaymentMethod,"onUpdate:modelValue":n[1]||(n[1]=t=>a.selectedPaymentMethod=t)},null,8,["icon","options","modelValue"]),l(d,{icon:s(o),placeholder:"Total a Pagar",modelValue:a.payment.total_payed,"onUpdate:modelValue":n[2]||(n[2]=t=>a.payment.total_payed=t),type:"number"},null,8,["icon","modelValue"])]),_:1}),l(u,{icon:s(o),label:"Pagar",class:"bg-green-300",target:"_blank","rounded-full":"",color:"",onClick:a.addPayment},null,8,["icon","onClick"])]),_:1}))}});export{$ as default};
